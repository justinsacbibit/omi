<!DOCTYPE html>
<head>
  <title>omi API</title>
  <meta charset='utf-8'/>
  <meta name='description' content='Documentation website'/>
  <meta name='viewport' content='width=device-width, initial-scale=1, maximum-scale=1'/>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'/>
  <link href='assets.css' rel='stylesheet' type='text/css'>
</head>
<body>  
  <nav id='sidebar'>
	<h1>omi API</h1>
<ul id='links'>
  
    
  
    
  
    
    <li><a href='#/response-status-codes'>Response status codes</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
  
  <li><h2>users</h2>
    <ul>
    
              
        <li class=''><a href='#'></a></li>
      
    
              
        <li class='GET'><a href='#/user'>Get a user</a></li>
              
        <li class='GET'><a href='#/owers'>Get a user's owers</a></li>
              
        <li class='POST'><a href='#/new-ower'>Create a new ower</a></li>
              
        <li class='GET'><a href='#/friends'>Get a user's Facebook friends</a></li>
      
    
    </ul>
  </li>

  <li><h2>authentication</h2>
    <ul>
    
              
        <li class=''><a href='#'></a></li>
      
    
              
        <li class='DELETE'><a href='#/logout'>Log out</a></li>
              
        <li class='POST'><a href='#/login'>Log in</a></li>
      
    
    </ul>
  </li>

  <li><h2>user info</h2>
    <ul>
    
              
        <li class=''><a href='#'></a></li>
      
    
              
        <li class='GET'><a href='#/user-info'>User Info</a></li>
      
    
    </ul>
  </li>

</ul>
</nav>

<section id='content'>

  <article class='GET'>
    <a name='/user-info' href='#/user-info'><h2><code><b>GET</b> /userInfo</code> User Info</h2></a>
    <section class='body'>
      <p>This method retrieves user info for an access token.</p>

<h3 id="request">Request</h3>

<ul>
  <li>The headers must include a <strong>valid access token</strong>.</li>
</ul>

<p><code>Authorization: Bearer TOKEN</code></p>

<h3 id="response">Response</h3>

<p><code>{
  "facebook_id": 3847140334283,
  "name": "Justin Sacbibit"
}</code></p>

<p>For errors responses, see the <a href="#response-status-codes">response status codes documentation</a>.</p>

    </section>
  </article>

  <article class='GET'>
    <a name='/user' href='#/user'><h2><code><b>GET</b> /users/:facebook_id</code> Get a user</h2></a>
    <section class='body'>
      <p>This method retrieves a user.</p>

<h3 id="request">Request</h3>

<ul>
  <li>The headers must include a <strong>valid access token</strong>.</li>
</ul>

<p><code>Authorization: Bearer TOKEN</code></p>

<h3 id="response">Response</h3>

<p>Sends back a user object.</p>

<p><code>Status: 200 OK</code>
<code>{
    "name": "Justin Sacbibit",
    "facebookId": 41784013843941,
    "omis": [],
    "owers": [],
    "created": "2014-09-02T02:38:25.658Z"
}</code></p>

<p>For errors responses, see the <a href="#response-status-codes">response status codes documentation</a>.</p>

    </section>
  </article>

  <article class=''>
    <a name='/response-status-codes' href='#/response-status-codes'><h2>Response status codes</h2></a>
    <section class='body'>
      <h3 id="success">Success</h3>

<p>Successes differ from errors in that their body may not be a simple response object with a message. The headers however are consistent across all calls:</p>

<ul>
  <li><code>GET</code>, <code>PUT</code>, <code>DELETE</code> returns <code>200 OK</code> on success,</li>
  <li><code>POST </code> returns 201 on success,</li>
</ul>

<p>When <a href="#/login">logging in</a> for example:</p>

<p><code>Status: 201 Created</code>
<code>{
  "token": {
    "access_token": "5ZLwlwz94d9w03323z3oItxCGonmdHoETtIrjtaOv70=",
    "expires": "5184000"
  },
  "user": {
    "facebook_id": 3871019282387,
    "name": "Justin Sacbibit"
  }
}</code></p>

<h3 id="error">Error</h3>

<p>Error responses are simply returning <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html">standard HTTP error codes</a> along with some additional information:</p>

<ul>
  <li>The body includes an object with an message (for debugging and/or display purposes),</li>
</ul>

<p>For a call with an invalid authentication token for example:</p>

<p><code>Status: 401 Access denied</code>
<code>{
  error: {
    message: 'Invalid access token'
  }
}</code></p>

    </section>
  </article>

  <article class='GET'>
    <a name='/owers' href='#/owers'><h2><code><b>GET</b> /users/:facebook_id/owers</code> Get a user's owers</h2></a>
    <section class='body'>
      <p>This method retrieves the owers for a user.</p>

<h3 id="request">Request</h3>

<ul>
  <li>The headers must include a <strong>valid access token</strong>.</li>
  <li>The token must correspond to the facebook ID.</li>
  <li>The following query parameters can be included:
    <ul>
      <li>offset: paginates. Requires: limit.</li>
      <li>limit: paginates. Requires: offset.</li>
      <li>name: filters the results. Requires: !facebook_id</li>
      <li>facebook_id: used for finding a single user. Requires: !name, !type</li>
      <li>type: used for only retrieving either “tethered” or “user” owers. Requires: !facebook_id</li>
    </ul>
  </li>
</ul>

<p><code>Authorization: Bearer TOKEN</code>
<code>/owers?offset=0&amp;limit=10</code></p>

<h3 id="response">Response</h3>

<p>Sends back an array of ower objects.</p>

<p><code>Status: 200 OK</code>
<code>[
  {
    "_id": jasdu0a93ufnjsvcxv093904,
    "name": "Justin Sacbibit",
    "facebookId": 41784013843941,
    "omis": [],
    "owers": [],
    "created": "2014-09-02T02:38:25.658Z"
    "_type": "User"
  },
  {
    "_id": fjasi203209r09zdjncwei0we,
    "name": "John Doe",
    "owner": 15263714193874134,
    "omis": [],
    "owers": [],
    "created": "2014-09-02T02:38:25.658Z"
    "_type": "TetheredUser"
  }
]</code></p>

<p>For errors responses, see the <a href="#response-status-codes">response status codes documentation</a>.</p>

    </section>
  </article>

  <article class='POST'>
    <a name='/new-ower' href='#/new-ower'><h2><code><b>POST</b> /users/:facebook_id/owers</code> Create a new ower</h2></a>
    <section class='body'>
      <p>This method creates an ower for a user.</p>

<h3 id="request">Request</h3>

<ul>
  <li>The headers must include a <strong>valid access token</strong>.</li>
  <li>The token must correspond to the facebook ID.</li>
  <li><strong>The body can’t be empty</strong> and must include one of the following:
    <ul>
      <li>name: Ower name. Requires: !facebook_id.</li>
      <li>facebook_id: Existing ower facebook ID. Requires: !name.</li>
    </ul>
  </li>
</ul>

<p><code>Authorization: Bearer TOKEN</code>
<code>{
  "name": "John Doe"
}</code></p>

<h3 id="response">Response</h3>

<p>Sends back a success boolean.</p>

<p><code>Status: 201 Created</code>
<code>{
  "success": true
}</code></p>

<p>For errors responses, see the <a href="#response-status-codes">response status codes documentation</a>.</p>

    </section>
  </article>

  <article class='DELETE'>
    <a name='/logout' href='#/logout'><h2><code><b>DELETE</b> /token</code> Log out</h2></a>
    <section class='body'>
      <p>This method logs out a user.</p>

<h3 id="request">Request</h3>

<ul>
  <li>The headers must include a <strong>valid access token</strong>.
<code>Authorization: Bearer TOKEN</code></li>
</ul>

<h3 id="response">Response</h3>

<p><code>{
  "success": true
}</code></p>

<h3 id="implementation-notes">Implementation Notes</h3>

<ul>
  <li>The access_token will become invalidated, and should no longer be kept on the client.</li>
</ul>

<p>For errors responses, see the <a href="#response-status-codes">response status codes documentation</a>.</p>

    </section>
  </article>

  <article class='POST'>
    <a name='/login' href='#/login'><h2><code><b>POST</b> /token</code> Log in</h2></a>
    <section class='body'>
      <p>This method authenticates a user.</p>

<h3 id="request">Request</h3>

<ul>
  <li><strong>The body can’t be empty</strong> and must include:
    <ul>
      <li>client_id, issued by the server administrator.</li>
      <li>client_secret, issued by the server administrator.</li>
      <li>fb_access_token, obtained from a user logging in to Facebook</li>
    </ul>
  </li>
</ul>

<p><code>{
  "client_id": bestapp,
  "client_secret": fj9a8sjefansdfkjasdfasd,
  "fb_access_token": "sdfkljsdfja39nassf9asdf"
}</code></p>

<h3 id="response">Response</h3>

<p>Sends back a token and user data.</p>

<p><code>{
  "token": {
    "access_token": "5ZLwlwz94d9w03323z3oItxCGonmdHoETtIrjtaOv70=",
    "expires": "5184000"
  },
  "user": {
    "facebook_id": 3871019282387,
    "name": "Justin Sacbibit"
  }
}</code></p>

<h3 id="implementation-notes">Implementation Notes</h3>

<ul>
  <li>The fb_access_token should be discarded, while the access_token should be saved.</li>
  <li>The access_token is required for most API calls.</li>
</ul>

<p>For errors responses, see the <a href="#response-status-codes">response status codes documentation</a>.</p>

    </section>
  </article>

  <article class='GET'>
    <a name='/friends' href='#/friends'><h2><code><b>GET</b> /users/:facebook_id/friends</code> Get a user's Facebook friends</h2></a>
    <section class='body'>
      <p>This method retrieves Facebook friends who have logged in through the app, and have granted the “user_friends” permission.</p>

<h3 id="request">Request</h3>

<ul>
  <li>The headers must include a <strong>valid access token</strong>.</li>
  <li>The token must correspond to the facebook ID.</li>
  <li>The following query parameters can be included:
    <ul>
      <li>offset, used for pagination.</li>
      <li>limit, used for pagination. If a value over 100 is used, only 100 items will be returned.</li>
      <li>name, used for filtering the results.</li>
    </ul>
  </li>
</ul>

<p><code>Authorization: Bearer TOKEN</code>
<code>/friends?offset=0&amp;limit=10&amp;name=Doe</code></p>

<h3 id="response">Response</h3>

<p>Sends back an array of objects containing a name and Facebook ID.</p>

<p><code>Status: 200 OK</code>
<code>{
  "friends": [
    {
      "name": "John Doe",
      "id": 1278731238
    },
    {
      "name": "Jane Doe",
      "id": 1283723627
    }
  ],
  "total_count": 408
}</code></p>

<p>For errors responses, see the <a href="#response-status-codes">response status codes documentation</a>.</p>

    </section>
  </article>

</section>

  
  <!--[if lt IE 9]><script src='http://html5shim.googlecode.com/svn/trunk/html5.js'></script><![endif]-->
  <script src='assets.js' type='text/javascript'></script>
  <script>require('boot');</script>
</body>
</html>